<!--
Comic preview subview that is used in box/view and collection/all
-->
<div style="display: inline-block">
<h3>{{=comic.comic.title}}</h3>
{{if (comic.comic.cover):}}
  {{=IMG(_src=URL('default', 'download',  args=comic.comic.cover), _width=100)}}
{{else:}}
  {{=IMG(_src=URL('static', 'images',  args='no-cover.jpg'), _width=100)}}
{{pass}}
</br>
</br>
<strong>Issue number:</strong> {{=comic.comic.issue}}</br>
<strong>Owner:</strong> {{=comic.auth_user.screen_name}}</br>
</br>
{{if auth.is_logged_in():}}
  <!--Display link to remove comic from box if the box belongs to user and
  the box either isn't unfiled or the comic is already in another box-->
  {{if (box.box.owner_id == auth.user.id):}}
    {{if ((box.box.name != "Unfiled") | (db(db.comic_in_box.comic_id == comic.comic.id).count() > 1)):}}
    <div class="btn-group" role="group">
    <a class="btn btn-default btn-sm", role="button", href={{=URL('comic','view', args=[comic.comic.id])}}>Full information</a>
    <a class="btn btn-danger btn-sm", role="button", href={{=URL('box','remove', args=[box.box.id, comic.comic.id])}}>Remove</a>
    </div>
    {{else:}}
    <!--Keep comics in line-->
    <a class="btn btn-default btn-sm", role="button", href={{=URL('comic','view', args=[comic.comic.id])}}>Full information</a>
    {{pass}}
  {{pass}}
{{pass}}
</div>
